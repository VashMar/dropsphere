doctype html
html
    head
        script(src='/production/bookmarkletinvitemin.js')    
        include includes/head
       
    body
        #container
            img#logo(src="/img/dropsphere_lg.png")
            h1 Install
            p.gray. You can start using Dropsphere in one click. <br/>Just drag the button below to your bookmarks on your browser.
            br
            a#bookmarklet(href="javascript:(function(){if(typeof dropsphere==='undefined' || dropsphere==false){dropsphere=true;var el=document.createElement('div'), b=document.getElementsByTagName('body')[0], otherlib=false, msg='';el.style.position='fixed';el.style.height='32px';el.style.width='220px';el.style.marginLeft='-110px';el.style.top='0';el.style.left='50%';el.style.padding='5px 10px';el.style.zIndex=1001;el.style.fontSize='12px';el.style.color='#222';el.style.backgroundColor='#f99';if(typeof jQuery!='undefined'){msg='This page already using jQuery v'+jQuery.fn.jquery;}else if (typeof $=='function'){otherlib=true;}function getScript(url,success){var script=document.createElement('script');script.src=url;var head=document.getElementsByTagName('head')[0], done=false;script.onload=script.onreadystatechange=function(){if ( !done && (!this.readyState || this.readyState=='loaded' || this.readyState=='complete') ){done=true;success();script.onload=script.onreadystatechange=null;head.removeChild(script);}};head.appendChild(script);}getScript('http://code.jquery.com/jquery.min.js',function(){if (typeof jQuery=='undefined'){msg='Sorry, but jQuery wasn\'t able to load';}else{msg='This page is now jQuerified with v' + jQuery.fn.jquery;if (otherlib){msg+=' and noConflict(). Use $jq(), not $().';}}uiLoader();});function uiLoader(){getScript('http://code.jquery.com/ui/1.10.4/jquery-ui.js',function(){if (typeof jQuery=='undefined'){msg='Sorry, but jQuery wasn\'t able to load';}else{msg='This page is now jQuerified with UI' + jQuery.fn.jquery;if (otherlib){msg+=' and noConflict(). Use $jq(), not $().';}}getScript('http://dropsphere.herokuapp.com/easyxdm/easyxdm.debug.js', function(){console.log('xdm loaded');book();book2();console.log('bookmarklet loaded');});return showMsg();});}function testMsg(){targetWindow.postMessage('Hello World!', 'http://dropsphere.herokuapp.com');}function showMsg(){el.innerHTML=msg;b.appendChild(el);window.setTimeout(function(){if (typeof jQuery=='undefined'){b.removeChild(el);}else{jQuery(el).fadeOut('slow',function(){jQuery(this).remove();});if (otherlib){$jq=jQuery.noConflict();}}},2500);}function book(){dropsphere=true;var d=document.createElement('div');d.setAttribute('id', 'dropsphere');d.style.width='300px';d.style.height='100%';d.style.position='fixed';d.style.top='0';d.style.right='0';d.style.zIndex='9999999';d.style.borderLeft='1px solid #ddd';document.body.appendChild(d);var close=document.createElement('div');close.setAttribute('id', 'close');close.onclick=function(){var ds=document.getElementById('dropsphere');ds.parentNode.removeChild(ds);dropsphere=false;};d.appendChild(close);var dropper=document.createElement('div');dropper.setAttribute('id', 'dropper');dropper.style.width='300px';dropper.style.height='100%';d.appendChild(dropper);var css=document.createElement('style');css.type='text/css';css.innerHTML='#dropsphere{animation:slide .5s;-webkit-animation:slide .5s;background: #f6f6f6 no-repeat center center;background-image:url(\'data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==\');}@keyframes slide{from{right:-300px;}to{right:0;}}@-webkit-keyframes slide{from{right:-300px;}to{right:0;}}#close{cursor:pointer;position:absolute;top:0;right:0;margin:2px 6px 0 0;height:30px;width:30px;background:url(http://dropsphere.herokuapp.com/img/close.png) no-repeat;}#close:hover{background:url(http://dropsphere.herokuapp.com/img/close_hover.png) no-repeat;}#dropsphere{}#dropsphere iframe{border:none;height:100%;}#dropper{position:absolute;top:0;pointer-events:none;}';document.body.appendChild(css);}function book2(){socketxdm=new easyXDM.Socket({remote: 'http://dropsphere.herokuapp.com/bookmark', container:'dropsphere', onMessage: function(message, origin){console.log('Received \'' + message + '\' from \'' + origin + '\'');if(message=='#draggify'){draggify();}}, onReady : function(){socketxdm.postMessage('Yay, it works!');}});draggify()}function draggify(){$('p, a, h1, h2, h3, h4').draggable({stack: 'div', zIndex:99999999, start: function(){$(this).height(100).width(100);},});$( '#dropper' ).droppable({drop: function( event, ui ){$( this ) .addClass( 'ui-state-highlight' ) .find( 'p' ) .html( 'Dropped!' );socketxdm.postMessage(ui.draggable.html());}});}function imgParse(img){return img.find('img').attr('src');}}})();") Dropsphere 
        script.
            var url = !{JSON.stringify(url)};
            if(url !== "undefined"){
               launchBookmark(url);
            }
      
        